Как работать с ИДОЙ?:
---

## 1. **Установка IDA**
1. Скачайте IDA Pro с официального сайта Hex-Rays (или используйте доступную версию IDA Free).
2. Установите программу, следуя инструкциям установщика.
3. При необходимости активируйте лицензию.

---

## 2. **Интерфейс IDA**
После запуска IDA вы увидите следующие основные элементы:
- **Главное меню:** доступ к функциям загрузки файлов, анализа и экспорта.
- **Графический вид (Graph View):** представление кода в виде блоков и переходов между ними.
- **Текстовый вид (Text View):** линейное представление кода в виде инструкций ассемблера.
- **Список функций (Functions):** перечисление всех функций, обнаруженных в бинарном файле.
- **Список строк (Strings):** текстовые строки, найденные в бинарнике.
- **Отладочная панель (Debugger):** для анализа исполняемых файлов.

---

## 3. **Загрузка файла**
1. **Файл → Open:** Выберите исполняемый файл (*.exe, *.dll и т. д.), который хотите исследовать.
2. IDA автоматически определит тип файла (ELF, PE, Mach-O и др.) и предложит параметры анализа.
3. Нажмите **OK**, чтобы запустить процесс анализа.

---

## 4. **Графический и текстовый виды**
- **Graph View:** удобен для понимания структуры кода и логики работы программы.
- **Text View:** полезен для детального анализа отдельных инструкций ассемблера.
Переключаться между видами можно клавишей **Space**.

---

## 5. **Основные панели**
- **Functions:** выберите любую функцию, чтобы увидеть её реализацию.
- **Strings:** помогает быстро найти строковые данные, такие как имена функций, сообщения и пути.
- **Hex View:** отображает содержимое файла в виде шестнадцатеричного дампа.
- **Imports/Exports:** показывает импортируемые и экспортируемые функции и библиотеки.

---

## 6. **Навигация по коду**
- Используйте клавиши **F5** для генерации псевдокода (если доступен Hex-Rays Decompiler).
- Нажмите на любую функцию или адрес, чтобы перейти к соответствующему месту в коде.
- Используйте **X**, чтобы увидеть, где вызывается определённая функция.

---

## 7. **Поиск и анализ**
- **Alt+T:** Поиск по текстовым строкам.
- **Ctrl+S:** Поиск по именам функций или символам.
- **Ctrl+F:** Поиск в текущем представлении (графическом или текстовом).

---

## 8. **Работа с псевдокодом**
Если у вас есть плагин **Hex-Rays Decompiler**, нажмите **F5**, чтобы получить псевдокод на языке C. Это упрощает понимание логики программы.

---

## 9. **Использование отладчика**
1. Переключитесь в режим отладки через меню **Debugger → Start Debugger**.
2. Укажите параметры запуска (если требуется).
3. Управляйте выполнением программы с помощью кнопок **Step Over (F8)**, **Step Into (F7)** и **Run to Cursor (Ctrl+F9)**.

---

## 10. **Полезные советы**
- Используйте комментарии (**;)**, чтобы помечать важные участки кода.
- Часто сохраняйте проект (**Ctrl+S**) во время работы.

---

### Полезные ссылки:
- Официальная документация IDA Pro: [https://hex-rays.com](https://hex-rays.com)
- Учебные материалы и туториалы: [IDA Pro Tutorials](https://www.hex-rays.com/resources/)


Как инджекнуть фриду?:

Открываем classes.dex
Ищем в com/supercell/titan/GameActivity.smali

Открываем его ищем где грузится libg.so

Достаточно вбить "g" в поиск

Когда найдешь, скопируй код для загрузки (это буквально 2 строки, const-string и loadLibrary

Вставь после загрузки libg.so и замени "g" в вставленном коде на своё имя (допустим: test)
Тогда игра будет пытаться после libg.so загрузить libtest.so
В качестве libtest.so должна быть фрида. Для теста разрешается использовать мою libshuvee.so либо же взять ее отсюда: https://github.com/frida/frida/releases

Разбор скрипта:

1. **`var cache = { ... }`**: Это объект, в котором хранятся различные данные, которые используются в программе. Это может включать модули, функции, константы, которые могут понадобиться в других частях программы.

2. **`const base = Process.findModuleByName('libg.so').base;`**: Здесь ищется базовый адрес модуля `libg.so`. Базовый адрес используется для доступа к функциям или объектам в этом модуле.

3. **`const SERVER_CONNECTION = 0xC86D10;`**: Это константа, представляющая адрес, который, вероятно, связан с подключением к серверу (для сетевого взаимодействия).

4. **`var malloc = new NativeFunction(Module.findExportByName('libc.so', 'malloc'), 'pointer', ['int']);`**: Это создание функции для вызова `malloc` — стандартной функции для выделения памяти в программе. Функция принимает один параметр — количество байт для выделения и возвращает указатель на выделенную память.

5. **`var pthread_mutex_lock = new NativeFunction(Module.findExportByName('libc.so', 'pthread_mutex_lock'), 'int', ['pointer']);`**: Это вызов функции для блокировки мьютекса (используется для синхронизации доступа к общим ресурсам между потоками).

6. **`var StageAdd = new NativeFunction(base.add(STAGE_ADD_CHILD), 'void', ['pointer', 'pointer']);`**: Этот вызов добавляет элемент на стадию игры (например, отображает UI элементы на экране). `StageAdd` — это функция, которая использует базовый адрес и смещение для вызова.

7. **`function WriteToMemory(address, valueType, value)`**: Функция для записи значений в память. Вы задаете тип значения (например, целое число, байт, строка) и саму переменную, которую хотите записать по указанному адресу в памяти.

8. **`var Message = { ... }`**: Это объект для обработки сообщений, который включает различные методы для кодирования, декодирования, освобождения памяти и доступа к атрибутам сообщения, таким как версия, тип и другие метаданные.

9. **`var MessageQueue = { ... }`**: Этот объект управляет очередью сообщений (добавление, удаление, инкрементирование/деинкрементирование счетчика). Он выполняет операции с очередью для обработки сообщений в программе.

10. **`function enableDebugInfo()`**: Функция для включения режима отладки, которая переписывает значения в памяти для активации режима разработчика и выключения продакшн-режима.

11. **`function OfflineBattles()`**: Функция для изменения поведения некоторых элементов игры, например, скрытие кнопки чата или обработка ботов.

12. **`function setupMessaging()`**: Эта функция настраивает систему обработки сообщений для игры, включая подключение к серверу, очередь сообщений, функцию отправки сообщений и обработку входящих данных.

13. **`function slowModeAction()`**: Эта функция переключает режим замедления игры. Она изменяет значения в памяти игры для активации или деактивации замедления.

14. **`function artTestModeAction()`**: Функция для активации или деактивации тестового режима для арт-ресурсов игры.

15. **`function spectateDebugAction()`**: Функция для включения или отключения режима наблюдения за игрой.

16. **`function DebugItemSpawn()`**: Функция для создания и отображения дебаг-элементов на экране, таких как кнопки и меню для добавления элементов или ресурсов.

